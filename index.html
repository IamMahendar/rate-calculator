<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Net Rate & Scheme Calculator</title>
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
<style>
@import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
body { font-family: 'Inter', sans-serif; }
input[type=number]::-webkit-inner-spin-button,
input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
</style>
</head>
<body class="bg-gray-100 min-h-screen pb-10">

<div class="max-w-md mx-auto bg-white min-h-screen shadow-2xl relative">

<!-- Header -->
<div class="bg-blue-700 p-5 pt-8 text-white rounded-b-3xl shadow-lg z-10 relative">
<h1 class="text-2xl font-bold">Net Rate Calculator</h1>
<p class="text-blue-200 text-sm mt-1">PTR + GST - Discount - Free Scheme</p>
</div>

<!-- Scrollable Content -->
<div class="p-5 space-y-5 -mt-2">

<!-- Card 1: Basic Rate Info -->
<div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3">
<h3 class="text-xs font-bold text-gray-400 uppercase">Rate Details</h3>
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-xs font-semibold text-gray-600 mb-1">MRP (Per Unit)</label>
<div class="relative">
<span class="absolute left-3 top-2.5 text-gray-400">₹</span>
<input type="number" id="mrp" placeholder="0" oninput="calculate()" class="w-full pl-6 pr-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-gray-800">
</div>
</div>
<div>
<label class="block text-xs font-semibold text-gray-600 mb-1">PTR (Per Unit)</label>
<div class="relative">
<span class="absolute left-3 top-2.5 text-gray-400">₹</span>
<input type="number" id="ptr" placeholder="0" oninput="calculate()" class="w-full pl-6 pr-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-gray-800">
</div>
</div>
</div>

<div>
<label class="block text-xs font-semibold text-gray-600 mb-2">GST %</label>
<div class="flex gap-2">
<button onclick="setGST(0)" class="gst-btn flex-1 py-1.5 rounded border text-sm font-medium transition" data-val="0">0%</button>
<button onclick="setGST(5)" class="gst-btn flex-1 py-1.5 rounded border text-sm font-medium transition" data-val="5">5%</button>
<button onclick="setGST(12)" class="gst-btn flex-1 py-1.5 rounded border text-sm font-medium bg-blue-600 text-white" data-val="12">12%</button>
<button onclick="setGST(18)" class="gst-btn flex-1 py-1.5 rounded border text-sm font-medium transition" data-val="18">18%</button>
</div>
<input type="hidden" id="gst" value="12">
</div>
</div>

<!-- Card 2: Quantity & Scheme -->
<div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3">
<h3 class="text-xs font-bold text-gray-400 uppercase">Scheme (Quantity)</h3>
<div class="flex items-center gap-4">
<div class="flex-1">
<label class="block text-xs font-semibold text-gray-600 mb-1">Buy Qty (Billed)</label>
<input type="number" id="buy-qty" value="10" oninput="calculate()" class="w-full px-3 py-2 bg-blue-50 border border-blue-200 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-gray-800">
</div>
<div class="text-gray-400 pt-5">+</div>
<div class="flex-1">
<label class="block text-xs font-semibold text-gray-600 mb-1">Free Qty</label>
<input type="number" id="free-qty" value="0" oninput="calculate()" class="w-full px-3 py-2 bg-green-50 border border-green-200 rounded-lg focus:outline-none focus:border-green-500 font-bold text-gray-800">
</div>
</div>
<div class="text-right text-xs text-gray-500">Total Units: <span id="total-units" class="font-bold text-gray-800">10</span></div>
</div>

<!-- Card 3: Discounts -->
<div class="bg-white p-4 rounded-xl shadow-sm border border-gray-200 space-y-3">
<h3 class="text-xs font-bold text-gray-400 uppercase">Discounts (On PTR)</h3>
<div class="grid grid-cols-2 gap-4">
<div>
<label class="block text-xs font-semibold text-gray-600 mb-1">Discount %</label>
<div class="relative">
<input type="number" id="disc-percent" placeholder="0" oninput="calculate()" class="w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-gray-800">
<span class="absolute right-3 top-2.5 text-gray-400">%</span>
</div>
</div>
<div>
<label class="block text-xs font-semibold text-gray-600 mb-1">Less Amount (₹)</label>
<input type="number" id="disc-amt" placeholder="0" oninput="calculate()" class="w-full px-3 py-2 bg-gray-50 border border-gray-300 rounded-lg focus:outline-none focus:border-blue-500 font-bold text-gray-800">
</div>
</div>
</div>

<!-- RESULTS SECTION -->
<div class="bg-gray-900 text-white p-5 rounded-2xl shadow-xl space-y-4">

<!-- Main Result -->
<div class="flex justify-between items-end border-b border-gray-700 pb-4">
<div>
<p class="text-gray-400 text-xs font-bold uppercase mb-1">Net Landing Cost / Unit</p>
<p class="text-[10px] text-gray-500">(After Scheme, Disc & GST)</p>
</div>
<div class="text-right">
<h2 class="text-3xl font-bold text-green-400">₹ <span id="net-rate">0.00</span></h2>
</div>
</div>

<!-- Margin -->
<div class="flex justify-between items-center">
<div>
<p class="text-gray-400 text-xs font-bold uppercase">Margin %</p>
<p class="text-[10px] text-gray-500">On MRP</p>
</div>
<h2 class="text-xl font-bold text-yellow-400"><span id="margin-percent">0.00</span>%</h2>
</div>

<!-- Summary Grid -->
<div class="grid grid-cols-2 gap-y-2 gap-x-4 text-sm pt-2">
<div class="flex justify-between text-gray-400">
<span>Total Bill Value:</span>
<span class="text-white">₹<span id="total-bill">0.00</span></span>
</div>
<div class="flex justify-between text-gray-400">
<span>Total GST:</span>
<span class="text-white">₹<span id="total-gst">0.00</span></span>
</div>
<div class="flex justify-between text-gray-400 col-span-2 border-t border-gray-700 pt-2 mt-1">
<span>Total Sales Value (MRP):</span>
<span class="text-white font-bold">₹<span id="total-sales">0.00</span></span>
</div>
</div>

</div>

<p class="text-center text-[10px] text-gray-400 pb-4">Note: Discount is calculated on PTR before GST.</p>

</div>
</div>

<script>
let currentGST = 12;

function setGST(val) {
currentGST = val;
document.querySelectorAll('.gst-btn').forEach(btn => {
const btnVal = parseInt(btn.dataset.val);
if (btnVal === val) {
btn.classList.add('bg-blue-600', 'text-white');
btn.classList.remove('bg-white', 'text-gray-700');
} else {
btn.classList.remove('bg-blue-600', 'text-white');
btn.classList.add('bg-white', 'text-gray-700');
}
});
calculate();
}

function calculate() {
// 1. Fetch Inputs
const mrp = parseFloat(document.getElementById('mrp').value) || 0;
const ptr = parseFloat(document.getElementById('ptr').value) || 0;
const buyQty = parseFloat(document.getElementById('buy-qty').value) || 0;
const freeQty = parseFloat(document.getElementById('free-qty').value) || 0;
const discPercent = parseFloat(document.getElementById('disc-percent').value) || 0;
const discFlatAmt = parseFloat(document.getElementById('disc-amt').value) || 0;

const totalUnits = buyQty + freeQty;
document.getElementById('total-units').innerText = totalUnits;

if (buyQty === 0 || ptr === 0) {
resetResults();
return;
}

// 2. Logic Implementation

// A. Gross Amount (Base Cost)
const grossAmount = ptr * buyQty;

// B. Calculate Discounts (Applied on Gross Amount)
// Note: Usually % discount is applied first, then flat amount is deducted, or they are additive.
// Here we sum them up to reduce the Taxable Value.
const discountAmountFromPercent = grossAmount * (discPercent / 100);
const totalDiscount = discountAmountFromPercent + discFlatAmt;

// C. Taxable Value (After Discount, Before GST)
const taxableValue = grossAmount - totalDiscount;

// D. GST Calculation
const gstAmount = taxableValue * (currentGST / 100);

// E. Total Bill Amount (What you pay to supplier)
const totalBillAmount = taxableValue + gstAmount;

// F. Net Rate Per Unit (Effective Cost)
// (Total Bill / Total Units received)
const netRatePerUnit = totalBillAmount / totalUnits;

// G. Sales & Margin
const totalSalesValue = mrp * totalUnits;
const netProfit = totalSalesValue - totalBillAmount;

// Margin % on MRP
let marginPercent = 0;
if (totalSalesValue > 0) {
marginPercent = (netProfit / totalSalesValue) * 100;
}

// 3. Update UI
document.getElementById('net-rate').innerText = netRatePerUnit.toFixed(2);
document.getElementById('margin-percent').innerText = marginPercent.toFixed(2);
document.getElementById('total-bill').innerText = totalBillAmount.toFixed(2);
document.getElementById('total-gst').innerText = gstAmount.toFixed(2);
document.getElementById('total-sales').innerText = totalSalesValue.toFixed(2);
}

function resetResults() {
document.getElementById('net-rate').innerText = "0.00";
document.getElementById('margin-percent').innerText = "0.00";
document.getElementById('total-bill').innerText = "0.00";
document.getElementById('total-gst').innerText = "0.00";
document.getElementById('total-sales').innerText = "0.00";
}
</script>
</body>
</html>

